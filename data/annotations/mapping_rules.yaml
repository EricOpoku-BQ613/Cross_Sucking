# Label Mapping Rules
# ===================
# Deterministic rules for normalizing annotations
# All changes are audited and traceable
# Updated 2026-02-08 for full 1,897-event dataset (6 groups)

version: "2.0"
created: "2024-12-17"
updated: "2026-02-08"

# Behavior label normalization
behavior:
  # Standard labels (no change)
  ear: ear
  tail: tail
  teat: teat
  other: other
  none: none

  # Ambiguous → normalized
  "tail/teat?": tail      # Conservative: default to more common
  "tail/teat": tail        # 6 events in full dataset
  "mouth": other           # 9 events — mouth sucking → other
  "mouth?": other          # Uncertain mouth → other
  "tailhead": tail         # Tailhead region → tail

  # Case normalization
  "Ear": ear
  "TAIL": tail
  "Teat": teat

# Role/ended-by normalization
# Uses substring matching: if any pattern appears in the raw value, maps to that role
ended_by:
  patterns:
    initiator:
      - "initiator"
    receiver:
      - "receiver"
      - "reciever"          # Typo in data (2 events)
    interrupted:
      - "interrupted"
      - "lost visibility"
      - "can't tell"
      - "video ended"
    other:
      - "switched to"       # "switched to tail manipulation only"
  default: unknown

# Pen location normalization
pen_location:
  # Standard
  front: front
  middle: middle
  back: back

  # Variations found in data
  "front-at feeder": front
  "front-at water": front
  " back": back              # Leading space (1 event)
  "middle ": middle          # Trailing space (34 events)
  "middlle": middle          # Typo fix
  "center": middle

# Duration validation rules
duration:
  min_valid: 0             # 0 seconds is valid (instantaneous)
  max_valid: 300           # 5 minutes max (flag if longer)
  flag_threshold: 120      # Flag events > 2 minutes for review

# Calf ID validation
calf_ids:
  valid_ranges:
    - [5680, 5720]         # Expected ID range across all 6 groups
  flag_if_outside: false   # Disabled — IDs span 6 groups, range not fully known

# Camera validation (per group)
cameras:
  group1: [7, 8, 9, 10]
  group2: [10, 11, 12, 16]
  group3: [8, 12, 14, 16]
  group4: []               # TBD — auto-detect from video filenames
  group5: []               # TBD
  group6: []               # TBD
